---
title: 'Search Memories'
api: 'POST /memories/search'
description: 'Search memories using natural language queries'
authMethod: 'bearer'
---

<Note>
  **HTTP Method:** `POST`  
  **Endpoint:** `/memories/search`
</Note>

## Overview

Search through stored memories using natural language queries. AgentMind uses semantic search to find relevant memories based on meaning, not just keyword matching.

## Request

<ParamField body="query" type="string" required>
  Natural language search query
</ParamField>

<ParamField body="limit" type="integer" default="10">
  Maximum number of results to return (1-100)
</ParamField>

<ParamField body="user_id" type="string">
  Filter results by user ID
</ParamField>

<ParamField body="session_id" type="string">
  Filter results by session ID
</ParamField>

<ParamField body="metadata_filter" type="object">
  Filter by metadata key-value pairs
</ParamField>

<ParamField body="threshold" type="float" default="0.7">
  Minimum similarity score (0-1). Higher values return more relevant results.
</ParamField>

<ParamField body="include_metadata" type="boolean" default="false">
  Include metadata in results
</ParamField>

## Response

<ResponseField name="results" type="array">
  Array of matching memories sorted by relevance
</ResponseField>

<ResponseField name="results[].id" type="string">
  Memory identifier
</ResponseField>

<ResponseField name="results[].content" type="any">
  The stored memory content
</ResponseField>

<ResponseField name="results[].score" type="float">
  Similarity score (0-1, higher is more relevant)
</ResponseField>

<ResponseField name="results[].timestamp" type="string">
  When the memory was created
</ResponseField>

<ResponseField name="results[].metadata" type="object">
  Additional metadata (if requested)
</ResponseField>

## Examples

### Basic Search

<CodeGroup>

```python Python
from agentmind import Memory

memory = Memory(api_key="YOUR_API_KEY")

# Natural language search
results = memory.recall("user interface preferences")
```

```bash cURL
curl -X POST https://api.agent-mind.com/v1/memories/search \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "user interface preferences"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.agent-mind.com/v1/memories/search', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    query: "user interface preferences"
  })
});

const results = await response.json();
```

</CodeGroup>

### Advanced Search with Filters

<CodeGroup>

```python Python
# Search with user filter and threshold
results = memory.recall(
    "trading strategy configuration",
    metadata_filter={
        "user_id": "trader_456",
        "category": "trading_config"
    },
    limit=5,
    threshold=0.8
)
```

```bash cURL
curl -X POST https://api.agent-mind.com/v1/memories/search \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "trading strategy configuration",
    "metadata_filter": {
      "user_id": "trader_456",
      "category": "trading_config"
    },
    "limit": 5,
    "threshold": 0.8
  }'
```

```javascript JavaScript
const response = await fetch('https://api.agent-mind.com/v1/memories/search', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    query: "trading strategy configuration",
    metadata_filter: {
      user_id: "trader_456",
      category: "trading_config"
    },
    limit: 5,
    threshold: 0.8
  })
});

const results = await response.json();
```

</CodeGroup>

### Response Example

```json
{
  "results": [
    {
      "id": "mem_abc123",
      "content": "Customer prefers email communication over phone calls",
      "score": 0.94,
      "timestamp": "2024-03-20T14:30:00Z"
    },
    {
      "id": "comm_prefs",
      "content": {
        "preference": "email",
        "frequency": "weekly",
        "format": "html"
      },
      "score": 0.89,
      "timestamp": "2024-03-19T10:15:00Z"
    },
    {
      "id": "mem_def456",
      "content": "User disabled SMS notifications",
      "score": 0.82,
      "timestamp": "2024-03-18T09:00:00Z"
    }
  ]
}
```

## Search Tips

### Query Formulation

- **Be specific**: "email preferences" returns better results than "preferences"
- **Use natural language**: "how does the customer want to be contacted?" works well
- **Include context**: "John Doe billing issues March 2024" for targeted results

### Performance Optimization

- Use `threshold` to filter out less relevant results
- Apply `metadata_filter` to narrow search scope
- Set appropriate `limit` to reduce response size
- Cache frequently searched queries on the client side

### Example Queries

| Use Case | Query Example |
|----------|---------------|
| User preferences | "communication preferences for user_123" |
| Recent issues | "problems reported in the last week" |
| Configuration | "API settings and rate limits" |
| Customer history | "all interactions with John Doe" |
| System state | "current feature flags and configurations" |

## Error Responses

### 400 Bad Request

```json
{
  "error": {
    "code": "invalid_query",
    "message": "Query must be between 1 and 500 characters"
  }
}
```

### 429 Rate Limited

```json
{
  "error": {
    "code": "rate_limit_exceeded",
    "message": "Too many search requests. Please wait 60 seconds."
  }
}
```